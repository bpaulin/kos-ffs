////////////////////////////////////////////////////////////////////////////////
// Reenter
//
// Decrease periapsis and launch descent
////////////////////////////////////////////////////////////////////////////////
declare parameter wantedPeriapsisKm.
declare parameter maxStage.
declare parameter maxWarp is 0.

run once lib_message.

set wantedPeriapsis to wantedPeriapsisKm*1000.

////////////////////////////////////////////////////////////////////////////////
// Decrease Periapsis
////////////////////////////////////////////////////////////////////////////////
detailMessage("Re-enter", "Decrease Periapsis to " + wantedPeriapsis).
if periapsis>wantedPeriapsis {
  run node_peri(wantedPeriapsis).
  run node.
}

////////////////////////////////////////////////////////////////////////////////
// Launch descent
////////////////////////////////////////////////////////////////////////////////
detailMessage("Re-enter", "Descent.").
run descent(maxStage, maxWarp).
