////////////////////////////////////////////////////////////////////////////////
// Reenter
//
// Decrease periapsis and launch descent
////////////////////////////////////////////////////////////////////////////////
declare parameter wantedPeriapsisKm.
declare parameter maxStage.
declare parameter maxWarp is 0.

run once lib_message.
print wantedPeriapsisKm.
set wantedPeriapsis to wantedPeriapsisKm*1000.

////////////////////////////////////////////////////////////////////////////////
// Decrease Periapsis
////////////////////////////////////////////////////////////////////////////////
if periapsis>wantedPeriapsis {
  detailMessage("Re-enter", "Decrease Periapsis to " + wantedPeriapsis).
  run node_peri(wantedPeriapsis).
  run exe_node.
}

////////////////////////////////////////////////////////////////////////////////
// Launch descent
////////////////////////////////////////////////////////////////////////////////
detailMessage("Re-enter", "Descent.").
run exe_descent(maxStage, maxWarp).
